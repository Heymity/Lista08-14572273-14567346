package ex2;

import static org.junit.Assert.*;

import javax.swing.*;
import java.lang.reflect.Field; 
import org.junit.jupiter.api.*;

import ex1.FatorialInterface;

public class TestFatorialWindow {
	static JFrame frame;
	static JTextField textField;
	static JButton button;
	static JLabel resultLabel;
	
	@BeforeAll
	public static void setup() throws NoSuchFieldException, SecurityException, IllegalArgumentException, IllegalAccessException {
		frame = new FatorialInterface();
		frame.setVisible(true);
		
		Field textFieldField = TestFatorialWindow.class.getDeclaredField("textField");
		Field buttonField = TestFatorialWindow.class.getDeclaredField("button");
		Field resultLabelField = TestFatorialWindow.class.getDeclaredField("resultLabel");
		
		textFieldField.setAccessible(true);
		buttonField.setAccessible(true);
		resultLabelField.setAccessible(true);
		
		textField = (JTextField)textFieldField.get(frame);
		button = (JButton)buttonField.get(frame);
		resultLabel = (JLabel)resultLabelField.get(frame);
	}
	
	@AfterAll
	public static void cleanUp() {
		frame.setVisible(false);
	}
	
	@Test
	public void test() throws InterruptedException {
		//textField.setText("5");
		//button.doClick();
		Thread.sleep(1000);
		
		assertEquals("120", resultLabel.getText());
	}
	
	
}
